package com.mobilerechargeapk.test;

import java.util.Scanner;

import com.mobilerechargeapk.dao.AdminDao;
import com.mobilerechargeapk.dao.OperatorDao;
import com.mobilerechargeapk.dao.UserDao;
import com.mobilerechargeapk.model.Admin;
import com.mobilerechargeapk.model.Operator;
import com.mobilerechargeapk.model.User;

public class MobileRechargeMain {

	public static void main(String[] args) {
		Scanner scan=new Scanner(System.in);
		System.out.println("Enter the Admin login");
		char correct='y';
		while(correct=='y') {
	    System.out.println("enter the name");
		String adminName=scan.nextLine();
		System.out.println("enter the pwd");
		String password=scan.nextLine();
	    AdminDao adminDao=new AdminDao();
	    boolean result=false;
	    result=adminDao.validateAdmin(adminName, password);
	    UserDao userdao=null;
	    
	    if(result!=false)
	    {
		System.out.println("\n1.Register\n2.login \n Enter your choice");
		int choice=Integer.parseInt(scan.nextLine());
		
		switch(choice) {
		case 1:
			String name=null;
			long number=0;
			do {
			System.out.println("Enter User Name:");
			name=scan.nextLine();
			if(name.isEmpty()) {
				System.out.println("name can not be empty");
		    }
		    }while(name.isEmpty());
			
			String mail=null;
			do {
			System.out.println("Enter Email_id:");
			 mail=scan.nextLine();
			if(mail.matches("[a-z][a-z 0-9]+[@][a-z][.][a-z]")) {
		    System.out.println("Enter valid mail address");
			}
			if(mail.isEmpty()) {
			System.out.println("Mail cannot be empty");
		     }
		     }while(mail.matches("[a-z][a-z 0-9]+[@][a-z][.][a-z]"));
			
			String tempnum=null;
			do {
			System.out.println("Enter Mobile number:");
		     tempnum=scan.nextLine();
		     if(!tempnum.matches("[0-9]{10}")) {
		    	 System.out.println("enter valid 10 digit mobile number");
		     }
		    if(tempnum.isEmpty()) {
		    	System.out.println("mobile number do not empty");
		    }
			}while(!tempnum.matches("[0-9]{10}"));
			number=Long.parseLong(tempnum);
			
		    System.out.println("Enter your password");
		    String pwd=scan.nextLine();
		    System.out.println("Enter your wallet");
		    Double wallet=Double.parseDouble(scan.nextLine());
		    System.out.println("Enter Operator Name");
		    String operatorName=scan.nextLine();
		    Operator operator=new Operator();
		    User user=new User(name,mail,number,pwd,wallet,operator);
		    userdao=new UserDao();
		    userdao.insertUser(user);
		case 2:
			userdao=new UserDao();
		    System.out.println("User Login");
		    System.out.println("Enter the  Emailid");
		    String Emailid=scan.nextLine();
		    User currentuser=userdao.validiateUser(Emailid,password);
		    if(currentuser!=null) {
		    	System.out.println(currentuser.getPassword());
		    }
		}
	    }
		else {
	    	System.out.println("re-enter username and password:");
	    	System.out.println("Do you want to re-enter:y/n");
	    	correct=scan.nextLine().charAt(0);
	    }
	 }
  }
}
